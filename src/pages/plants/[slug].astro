---
import "@/styles/main.css"
import "@/styles/plant-detail.css"
import plantsData from "@/data/plants.json"

export async function getStaticPaths() {
    return plantsData.plants.map((plant) => ({
        params: { slug: plant.slug },
    }))
}

// Obtenemos el slug desde la URL
const { slug } = Astro.params

// Buscamos la planta en el JSON
const plant = plantsData.plants.find((p) => p.slug === slug)

if (!plant) {
    throw new Error(`Planta con slug "${slug}" no encontrada`)
}
---

<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>{plant.name} - MisPlantas</title>
    </head>
    <body class="font-sans max-w-3xl mx-auto p-6">
        <header>
            <nav>
                <ul class="nav-list">
                    <li><a href="/" class="nav-link">INICIO</a></li>
                    <li>
                        <a href="/#plantas" class="nav-link">PLANTAS</a>
                    </li>
                    <li class="nav-logo">
                        <a href="/">MisPlantas</a>
                    </li>
                    <li>
                        <a href="/#contacto" class="nav-link">CONTACTO</a>
                    </li>
                </ul>
            </nav>
        </header>
        <!-- Volver -->
        <div class="back-navigation">
            <a href="index.astro" class="back-link">‚Üê Volver a Mis Plantas</a>
        </div>

        <main>
            <!-- Hero -->
            <section class="plant-hero">
                <div class="plant-hero-content">
                    <div class="plant-hero-image">
                        <img
                            src={plant.image}
                            alt={plant.name}
                            class="rounded-xl shadow-md"
                        />
                    </div>
                    <div class="plant-hero-info">
                        <h1 class="text-3xl font-bold mb-3">{plant.name}</h1>
                        <p class="plant-description">{plant.description}</p>

                        <div class="care-basics">
                            <h3 class="font-semibold text-lg mb-2">
                                Cuidados B√°sicos
                            </h3>
                            <ul class="care-grid">
                                <li>üíß Riego: {plant.care.watering}</li>
                                <li>‚òÄÔ∏è Luz: {plant.care.light}</li>
                                <li>
                                    üå°Ô∏è Temperatura: {plant.care.temperature}
                                </li>
                                <li>‚≠ê Dificultad: {plant.care.difficulty}</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Detalles -->
            <section class="plant-details">
                <div class="details-grid">
                    <article class="detail-card">
                        <h2 class="text-2xl font-semibold mb-4">
                            Condiciones de Cultivo
                        </h2>
                        <ul class="list-disc ml-6 space-y-1 text-gray-700">
                            <li>
                                <strong>Suelo:</strong>
                                {plant.details.soil}
                            </li>
                            <li><strong>pH:</strong> {plant.details.ph}</li>
                            <li>
                                <strong>Espacio:</strong>
                                {plant.details.spacing}
                            </li>
                            <li>
                                <strong>Profundidad:</strong>
                                {plant.details.depth}
                            </li>
                            <li>
                                <strong>√âpoca:</strong>
                                {plant.details.season}
                            </li>
                            <li>
                                <strong>Cosecha:</strong>
                                {plant.details.harvest}
                            </li>
                        </ul>
                    </article>

                    <!-- Problemas comunes -->
                    <article class="detail-card">
                        <h2 class="text-2xl font-semibold mb-4">
                            Problemas Comunes
                        </h2>
                        <ul class="list-disc ml-6 space-y-1 text-gray-700">
                            {
                                plant.problems.map((problem) => (
                                    <li>
                                        <strong>{problem.issue}:</strong>{" "}
                                        {problem.solution}
                                    </li>
                                ))
                            }
                        </ul>
                    </article>

                    <!-- Consejos -->
                    <article class="detail-card">
                        <h2 class="text-2xl font-semibold mb-4">
                            Consejos de Cuidado
                        </h2>
                        <ul class="list-disc ml-6 space-y-1 text-gray-700">
                            {plant.tips.map((tip) => <li>{tip}</li>)}
                        </ul>
                    </article>
                </div>
            </section>

            <!-- Galer√≠a -->
            <section class="plant-gallery">
                <h2 class="text-2xl font-semibold mb-4">Galer√≠a</h2>
                <div class="gallery-grid">
                    {
                        plant.gallery.map((img) => (
                            <div class="gallery-item">
                                <img src={img} alt={plant.name} />
                            </div>
                        ))
                    }
                </div>
            </section>
        </main>
        <footer>
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Mis Plantas</h4>
                    <p>
                        Un espacio dedicado a compartir mi pasi√≥n por la
                        jardiner√≠a y el cultivo de plantas. Cada planta tiene su
                        historia y sus cuidados especiales.
                    </p>
                </div>
                <div class="footer-section">
                    <h4>Enlaces R√°pidos</h4>
                    <ul>
                        <li><a href="index.html">Inicio</a></li>
                        <li><a href="index.html#plantas">Plantas</a></li>
                        <li><a href="#contacto">Contacto</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Contacto</h4>
                    <p>
                        ¬øTienes preguntas sobre el cuidado de plantas o quieres
                        compartir tu experiencia? ¬°Me encantar√≠a escucharte!
                    </p>
                    <p>Email: jardin@misplantas.com</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 MisPlantas - Cultivando con amor y dedicaci√≥n</p>
            </div>
        </footer>
    </body>
</html>
